<div class="sale-summary">
    <div class="sale-header">
        <div class="sale-meta">
            <p>N° Venta: {{ object.pk }}</p>
            <p>Vendedor: {{ object.seller.username }}</p>
            <p>Fecha: {{ sale.created_at|date:"d/m/Y" }}</p>
            {% if sale.client %}<p>Cliente: {{ sale.client.name }}</p>{% endif %}
        </div>
    </div>

    <div class="items-list">
        <div class="items-header">
            <span>Artículo</span>
            <span>Cant.</span>
            <span>Precio U.</span>
            <span>Total</span>
        </div>
        
        {% for item in object.details.all %}
        <div class="item-row">
            <span class="product-name">{{ item.product.name }}</span>
            <span>{{ item.quantity }}</span>
            <span>${{ item.formatted_sale_price }}</span>
            <span class="item-total">${{ item.formatted_total_price }}</span>
        </div>
        {% endfor %}
    </div>

    <div class="summary-divider"></div>

    <div class="total-section">
        <div class="total-row">
            <span>A cobrar:</span>
            <span class="sale-total">${{ object.formatted_total_amount }}</span>
        </div>
        
        <form id="closeSaleForm" data-sale-id="{{ object.pk }}" method="post">
            {% csrf_token %}
            <div class="form-group">
                <label for="{{ form.pay_method.id_for_label }}">Método de pago:</label>
                {{ form.pay_method }}
                {% if form.pay_method.errors %}{{ form.pay_method.errors }}{% endif %}
            </div>
        </form>
    </div>
</div>